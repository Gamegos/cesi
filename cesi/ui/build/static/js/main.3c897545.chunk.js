(this["webpackJsonpcesi-web-ui"]=this["webpackJsonpcesi-web-ui"]||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),c=(a(71),a(8)),l=a.n(c),m=a(12),u=a(17),i=a(11),h=(a(73),a(28)),d=a.n(h);const p="/cesi/api/v2",g=e=>d.a.get(e).then(e=>e.data).catch(e=>{throw e.response.data}),E=(e,t)=>d.a.post(e,t).then(e=>e.data).catch(e=>{throw e.response.data}),f=e=>d.a.delete(e).then(e=>e.data).catch(e=>{throw e.response.data}),v={get:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat(p,"/activitylogs/20/"));case 3:return t=e.sent,e.abrupt("return",t.logs);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),clear:()=>f("".concat(p,"/activitylogs/"))},w={logIn:(e,t)=>E("".concat(p,"/auth/login/"),{username:e,password:t}),logOut:()=>E("".concat(p,"/auth/logout/"))},b={get:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat(p,"/profile/"));case 3:return t=e.sent,e.abrupt("return",t.user);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),changePassword:(e,t)=>{return a="".concat(p,"/profile/password/"),n={oldPassword:e,newPassword:t},d.a.put(a,n).then(e=>e.data).catch(e=>{throw e.response.data});var a,n}},y={get:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat(p,"/nodes/"));case 3:return t=e.sent,e.abrupt("return",t.nodes);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),getNode:e=>g("".concat(p,"/nodes/").concat(e,"/")),allProcesses:{start:e=>g("".concat(p,"/nodes/").concat(e,"/all-processes/start/")),stop:e=>g("".concat(p,"/nodes/").concat(e,"/all-processes/stop/")),restart:e=>g("".concat(p,"/nodes/").concat(e,"/all-processes/restart/"))}},k={get:e=>g("".concat(p,"/nodes/").concat(e,"/processes/")),process:{get:(e,t)=>g("".concat(p,"/nodes/").concat(e,"/processes/").concat(t,"/")),start:(e,t)=>g("".concat(p,"/nodes/").concat(e,"/processes/").concat(t,"/start/")),stop:(e,t)=>g("".concat(p,"/nodes/").concat(e,"/processes/").concat(t,"/stop/")),restart:(e,t)=>g("".concat(p,"/nodes/").concat(e,"/processes/").concat(t,"/restart/")),log:(e,t)=>g("".concat(p,"/nodes/").concat(e,"/processes/").concat(t,"/log/"))}},C={get:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat(p,"/users/"));case 3:return t=e.sent,e.abrupt("return",t.users);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),add:(e,t,a)=>E("".concat(p,"/users/"),{username:e,password:t,usertype:a}),remove:e=>f("".concat(p,"/users/").concat(e,"/"))},x={get:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat(p,"/environments/"));case 3:return t=e.sent,console.log("GetEnvironments:",t),e.abrupt("return",Promise.all(t.environments.map(function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,e.next=3,Promise.all(t.members.map(e=>y.getNode(e.general.name)));case 3:return n=(n=e.sent).map(e=>e.node),e.abrupt("return",{name:a,members:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},S={get:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat(p,"/groups/"));case 3:return t=e.sent,console.log(t),e.abrupt("return",t.groups);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},P={get:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/cesi/api/version");case 3:return t=e.sent,console.log(t),e.abrupt("return",t.version);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","0");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()};var N={activitylogs:v,auth:w,profile:b,nodes:y,processes:k,users:C,environments:x,groups:S,version:P},O=a(125),A=a(117),I=a(118),j=a(62);var L=({logs:e,refreshLogs:t,clearLogs:a})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(A.a,null,r.a.createElement(I.a,{sm:"10"},r.a.createElement("h2",null,"Activity Logs")),r.a.createElement(I.a,null,r.a.createElement(j.a,{outline:!0,color:"info",onClick:t},"Refresh")," ",r.a.createElement(j.a,{outline:!0,color:"danger",onClick:a},"Clear"))),r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement(F,{logs:e})))),R=a(119),U=a(120);var F=({logs:e})=>r.a.createElement(R.a,null,e.map(e=>r.a.createElement(U.a,{key:e},e))),M=a(27),D=a(121),G=a(122),T=a(123),W=a(124);var z=e=>{const t=[],a=[];var n,r=Object(M.a)(e);try{for(r.s();!(n=r.n()).done;){const e=n.value;!0===e.general.connected?t.push(e):a.push(e)}}catch(s){r.e(s)}finally{r.f()}return{connectedNodes:t,notConnectedNodes:a}};var J=({environments:e,nodes:t})=>{const a=z(t),n=a.connectedNodes,s=a.notConnectedNodes,o={running:[],stopped:[]};var c,l=Object(M.a)(n);try{for(l.s();!(c=l.n()).done;){const e=c.value;var m,u=Object(M.a)(e.processes);try{for(u.s();!(m=u.n()).done;){const e=m.value;"STOPPED"===e.statename?o.stopped.push(e):"RUNNING"===e.statename&&o.running.push(e)}}catch(d){u.e(d)}finally{u.f()}}}catch(d){l.e(d)}finally{l.f()}const i=e.reduce((e,t)=>e.concat(...t.members),[]),h=i.reduce((e,t)=>e+t.processes.length,0);return r.a.createElement(A.a,{className:"justify-content-md-center"},r.a.createElement(I.a,null,r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Environments ",r.a.createElement(T.a,{color:"secondary"},e.length)),r.a.createElement(W.a,null,i.length," Nodes | ",h," ","Processes"))),r.a.createElement(I.a,null,r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Nodes ",r.a.createElement(T.a,{color:"secondary"},t.length)),r.a.createElement(W.a,null,n.length," Connected | ",s.length," ","Not-Connected"))),r.a.createElement(I.a,null,r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Processes"," ",r.a.createElement(T.a,{color:"secondary"},o.running.length+o.stopped.length)),r.a.createElement(W.a,null,o.running.length," Running | ",o.stopped.length," ","Stopped"))))};class B extends n.Component{componentDidMount(){this.props.refreshActivityLogs(),this.props.refreshDashboardSummary()}render(){const e=this.props,t=e.environments,a=e.nodes,n=e.logs,s=e.refreshActivityLogs,o=e.clearActivityLogs;return r.a.createElement(O.a,null,r.a.createElement(J,{environments:t,nodes:a}),r.a.createElement(L,{logs:n,refreshLogs:s,clearLogs:o}))}}var V=B,_=a(141),Q=a(126),Y=a(127),$=a(128);class q extends r.a.Component{constructor(...e){super(...e),this.state={modal:!1,logs:null},this.toggle=()=>{this.setState({modal:!this.state.modal})},this.showLogs=()=>{const e=this.props,t=e.node,a=e.process,n="".concat(a.group,":").concat(a.name);N.processes.process.log(t.general.name,n).then(e=>{console.log(e),this.setState({logs:e.logs}),this.toggle()})}}render(){const e=this.props,t=e.node,a=e.process;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{color:"info",onClick:this.showLogs},"Log")," ",r.a.createElement(_.a,{isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(Q.a,{toggle:this.toggle},"Node: ",t.general.name," | Process: ",a.name),r.a.createElement(Y.a,null,this.state.logs&&r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Stdout"),this.state.logs.stdout.map(e=>r.a.createElement("p",{key:e},e)),r.a.createElement("br",null),r.a.createElement("strong",null,"Stderr"),this.state.logs.stderr.map(e=>r.a.createElement("p",{key:e},e))))))}}const H=({node:e,process:t,refresh:a})=>{const n=n=>{const r=e.general.name,s="".concat(t.group,":").concat(t.name);N.processes.process[n](r,s).then(e=>{console.log(e),a()})};let s="";switch(t.statename){case"STARTING":s="table-info";break;case"RUNNING":s="table-success";break;case"STOPPED":s="table-warning";break;case"FATAL":s="table-danger";break;default:s=""}return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:t.name,class:s},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.group),r.a.createElement("td",null,t.pid),r.a.createElement("td",null,t.uptime),r.a.createElement("td",null,t.statename),r.a.createElement("td",null,r.a.createElement(j.a,{color:"success",onClick:()=>n("start")},"Start")," ",r.a.createElement(j.a,{color:"danger",onClick:()=>n("stop")},"Stop")," ",r.a.createElement(j.a,{color:"warning",onClick:()=>n("restart")},"Restart")," ",r.a.createElement(q,{process:t,node:e}))))};class K extends r.a.Component{constructor(...e){super(...e),this.handleAllProcess=e=>{const t=this.props.node.general.name;N.nodes.allProcesses[e](t).then(()=>{console.log("Updating nodes for single node action."),this.props.refresh()})}}render(){const e=this.props,t=e.node,a=e.filterFunc;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Processes for ",t.general.name," ",r.a.createElement(T.a,{color:"secondary"},t.processes.length)," ",r.a.createElement(j.a,{color:"success",onClick:()=>this.handleAllProcess("start")},"Start All")," ",r.a.createElement(j.a,{color:"danger",onClick:()=>this.handleAllProcess("stop")},"Stop All")," ",r.a.createElement(j.a,{color:"warning",onClick:()=>this.handleAllProcess("restart")},"Restart All")," "),0!==t.processes.length?r.a.createElement($.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Group"),r.a.createElement("th",null,"Pid"),r.a.createElement("th",null,"Uptime"),r.a.createElement("th",null,"State"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,t.processes.filter(a).map(e=>r.a.createElement(H,{key:"".concat(t.name,":").concat(e.name),node:t,process:e,refresh:this.props.refresh})))):r.a.createElement("p",null,"No processes configured.")),r.a.createElement("br",null))}}K.defaultProps={filterFunc:()=>!0};var X=K,Z=a(37),ee=a(142);var te=e=>{const t=e.checks,a=e.environments,n=e.onInputChange,s=a.map(e=>{const t=z(e.members),a=t.connectedNodes,n=t.notConnectedNodes;return Object(Z.a)(Object(Z.a)({},e),{},{connectedNodes:a,notConnectedNodes:n})});return r.a.createElement(r.a.Fragment,null,s.length>0&&s.map(e=>r.a.createElement(D.a,{body:!0,key:e.name},r.a.createElement(G.a,null,r.a.createElement(ee.a,{type:"checkbox",name:e.name,id:e.name,label:e.name,onChange:n,checked:t.indexOf(e.name)>=0,inline:!0}),r.a.createElement(T.a,{color:"secondary"},e.members.length)),r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Connected"," ",r.a.createElement(T.a,{color:"secondary"},e.connectedNodes.length)),e.connectedNodes.map(e=>r.a.createElement("p",{key:e.general.name},e.general.name))),r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Not-Connected"," ",r.a.createElement(T.a,{color:"secondary"},e.notConnectedNodes.length)),e.notConnectedNodes.map(e=>r.a.createElement("p",{key:e.general.name},e.general.name))))))};class ae extends n.Component{constructor(...e){super(...e),this.state={checks:[]},this.handleInputChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;a?this.setState(e=>({checks:e.checks.concat([n])})):this.setState(e=>({checks:e.checks.filter(e=>e!==n)}))}}componentWillMount(){this.props.refreshEnvironments()}render(){const e=this.state.checks,t=this.props,a=t.environments,n=t.refreshEnvironments;return r.a.createElement(O.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{sm:{size:"auto"}},r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Environments"," ",r.a.createElement(T.a,{color:"secondary"},a.length)),r.a.createElement(te,{environments:this.props.environments,checks:this.state.checks,onInputChange:this.handleInputChange}))),r.a.createElement(I.a,null,e.map(e=>a.filter(t=>t.name===e).map(e=>r.a.createElement("div",{key:e.name},r.a.createElement("h1",null,"Environment:",r.a.createElement(T.a,{color:"info"},e.name)),e.members.map(e=>r.a.createElement(X,{key:e.general.name,node:e,refresh:n}))))))))}}var ne=ae;var re=e=>{const t=e.nodes,a=e.checks,n=e.onInputChange,s=z(t),o=s.connectedNodes,c=s.notConnectedNodes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Connected ",r.a.createElement(T.a,{color:"secondary"},o.length)),o.map(e=>r.a.createElement(ee.a,{key:e.general.name,type:"checkbox",name:e.general.name,id:e.general.name,label:e.general.name,onChange:n,checked:a.indexOf(e.general.name)>=0,inline:!0}))),r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Not-Connected"," ",r.a.createElement(T.a,{color:"secondary"},c.length)),c.map(e=>r.a.createElement(ee.a,{key:e.general.name,type:"checkbox",name:e.general.name,id:e.general.name,label:e.general.name,onChange:n,disabled:!0}))))};class se extends n.Component{constructor(...e){super(...e),this.state={checks:[]},this.handleInputChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;a?this.setState(e=>({checks:e.checks.concat([n])})):this.setState(e=>({checks:e.checks.filter(e=>e!==n)}))}}componentDidMount(){this.props.refreshNodes()}render(){const e=this.state.checks,t=this.props,a=t.nodes,n=t.refreshNodes;return r.a.createElement(O.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{sm:{size:"auto"}},r.a.createElement(re,{nodes:this.props.nodes,checks:e,onInputChange:this.handleInputChange})),r.a.createElement(I.a,null,a.filter(t=>e.indexOf(t.general.name)>=0).map(e=>r.a.createElement(X,{key:e.general.name,node:e,refresh:n})))))}}var oe=se;var ce=e=>{const t=e.groups,a=e.checks,n=e.onInputChange;return r.a.createElement(r.a.Fragment,null,t.length>0&&t.map(e=>r.a.createElement(D.a,{body:!0,key:e.name},r.a.createElement(G.a,null,r.a.createElement(ee.a,{type:"checkbox",name:e.name,id:e.name,label:e.name,onChange:n,checked:a.indexOf(e.name)>=0,inline:!0}),r.a.createElement(T.a,{color:"secondary"},e.environments.length)),e.environments.map(e=>r.a.createElement(D.a,{body:!0,key:e.name},r.a.createElement(G.a,null,e.name," ",r.a.createElement(T.a,{color:"secondary"},e.members.length)),e.members.map(e=>r.a.createElement("p",{key:e},e)))))))};class le extends n.Component{constructor(...e){super(...e),this.state={checks:[]},this.handleInputChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;a?this.setState(e=>({checks:e.checks.concat([n])})):this.setState(e=>({checks:e.checks.filter(e=>e!==n)}))}}componentWillMount(){this.props.refreshGroups()}render(){const e=this.state.checks,t=this.props,a=t.groups,n=t.nodes,s=t.refreshNodes,o=t=>e.includes(t.group);return r.a.createElement(O.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{sm:{size:"auto"}},r.a.createElement(D.a,{body:!0},r.a.createElement(G.a,null,"Groups "," ",r.a.createElement(T.a,{color:"secondary"},a.length)),r.a.createElement(ce,{groups:a,checks:e,onInputChange:this.handleInputChange}))),r.a.createElement(I.a,null,e.length>0&&n.map(e=>r.a.createElement(X,{key:e.general.name,node:e,filterFunc:o,refresh:s})))))}}var me=le,ue=a(129),ie=a(130),he=a(131),de=a(132),pe=a(143);var ge=e=>{const t=e.message,a=e.status;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(pe.a,{color:a},t))};class Ee extends n.Component{constructor(...e){super(...e),this.state={modal:!1,username:"",password:"",confirmPassword:"",usertype:"0",formMessage:"",formStatus:""},this.toggle=()=>{this.setState({modal:!this.state.modal})},this.handleInputChange=e=>{const t=e.target,a=t.name,n=t.value;this.setState({[a]:n})},this.submitForm=e=>{e.preventDefault();const t=this.state,a=t.username,n=t.password,r=t.confirmPassword,s=t.usertype;n===r?N.users.add(a,n,s).then(e=>{this.setState({formStatus:"success",formMessage:"'".concat(a,"' successfully added")}),setTimeout(()=>{this.toggle(),this.props.refreshUsers()},1e3)}).catch(e=>{console.log(e),this.setState({formStatus:"danger",formMessage:e.message})}):this.setState({formStatus:"danger",formMessage:"Password and Confirm Password didn't match"})}}render(){const e=this.state,t=e.username,a=e.password,n=e.confirmPassword,s=e.formMessage,o=e.formStatus;return r.a.createElement("div",null,r.a.createElement(j.a,{outline:!0,color:"success",onClick:this.toggle},"Add New User"),r.a.createElement(_.a,{isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(Q.a,{toggle:this.toggle},"New User"),r.a.createElement(Y.a,null,r.a.createElement(ue.a,{onSubmit:this.submitForm},r.a.createElement(ge,{message:s,status:o}),r.a.createElement(ie.a,null,r.a.createElement(he.a,null,"Username"),r.a.createElement(de.a,{type:"username",name:"username",id:"exampleUsername",placeholder:"myusername",value:t,onChange:this.handleInputChange})),r.a.createElement(ie.a,null,r.a.createElement(he.a,{for:"password"},"Password"),r.a.createElement(de.a,{type:"password",name:"password",id:"password",placeholder:"********",value:a,onChange:this.handleInputChange})),r.a.createElement(ie.a,null,r.a.createElement(he.a,{for:"confirmPassword"},"Confirm Password"),r.a.createElement(de.a,{type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"********",value:n,onChange:this.handleInputChange})),r.a.createElement(ie.a,null,r.a.createElement(he.a,{for:"usertype"},"Usertype"),r.a.createElement(de.a,{type:"select",name:"usertype",id:"usertype",onChange:this.handleInputChange},r.a.createElement("option",{value:"0"},"Admin"),r.a.createElement("option",{value:"1"},"Normal User"))),r.a.createElement(j.a,{color:"success"},"Add")," ",r.a.createElement(j.a,{color:"secondary",onClick:this.toggle},"Cancel")))))}}var fe=Ee;class ve extends n.Component{componentDidMount(){this.props.refreshUsers()}render(){const e=["Admin","Normal User"],t=this.props,a=t.users,n=t.refreshUsers,s=t.removeUser;return r.a.createElement(O.a,null,r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement("h2",null,"Users")),r.a.createElement(I.a,null,r.a.createElement(fe,{refreshUsers:n}))),r.a.createElement(A.a,null,r.a.createElement($.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Usertype"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,a.map((t,a)=>r.a.createElement("tr",{key:t.name},r.a.createElement("th",{scope:"row"},a),r.a.createElement("td",null,t.name),r.a.createElement("td",null,e[t.type]),r.a.createElement("td",null,r.a.createElement(j.a,{color:"danger",disabled:"admin"===t.name,onClick:()=>s(t.name)},"Remove")," ")))))))}}var we=ve;var be=()=>r.a.createElement("div",null,r.a.createElement("p",null,"Error: Path does not exists!!!"));class ye extends n.Component{constructor(e){super(e),this.handleChange=e=>{const t=e.target,a=t.name,n=t.value;this.setState({[a]:n})},this.submitForm=e=>{e.preventDefault();const t=this.state,a=t.username,n=t.password;this.props.onLogIn(a,n).then(()=>this.setState({formStatus:"success",formMessage:"Successfully logged in."})).catch(e=>this.setState({formStatus:"danger",formMessage:"Invalid username or password"}))},this.state={username:"",password:"",formMessage:"",formStatus:""}}render(){const e=this.state,t=e.username,a=e.password,n=e.formMessage,s=e.formStatus;return r.a.createElement(O.a,{className:"App"},r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement("h2",null,"Cesi Log In"),r.a.createElement(ue.a,{className:"form-signin",onSubmit:this.submitForm},r.a.createElement(ge,{message:n,status:s}),r.a.createElement(ie.a,null,r.a.createElement(he.a,null,"Username"),r.a.createElement(de.a,{type:"username",name:"username",id:"exampleUsername",placeholder:"myusername",value:t,onChange:this.handleChange})),r.a.createElement(ie.a,null,r.a.createElement(he.a,{for:"examplePassword"},"Password"),r.a.createElement(de.a,{type:"password",name:"password",id:"examplePassword",placeholder:"********",value:a,onChange:this.handleChange})),r.a.createElement(j.a,{block:!0,color:"primary",size:"lg"},"Submit")))))}}var ke=ye;var Ce=()=>r.a.createElement("div",null,r.a.createElement("h1",null,"CeSI"),r.a.createElement("p",null,"Cesi provides a web interface that manages many supervisors."),r.a.createElement("p",null,"We use these technologies:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Python3 (+3.4)"),r.a.createElement("li",null,"Flask (+1.0)"),r.a.createElement("li",null,"ReactJs (+16.0)")),r.a.createElement("a",{href:"https://github.com/gamegos/cesi"},"Source Code and Documentation"));class xe extends r.a.Component{constructor(...e){super(...e),this.state={oldPassword:"",newPassword:"",confirmPassword:"",formMessage:"",formStatus:""},this.handleInputChange=e=>{const t=e.target,a=t.name,n=t.value;this.setState({[a]:n})},this.handleChangePassword=e=>{e.preventDefault();const t=this.state,a=t.oldPassword,n=t.newPassword,r=t.confirmPassword;a?n===r?N.profile.changePassword(a,n).then(e=>{this.setState({formStatus:"success",formMessage:"Success! Your Password has been changed!"}),setTimeout(()=>{this.props.history.push("/")},1e3)}).catch(e=>{console.log(e),this.setState({formStatus:"danger",formMessage:e.message})}):this.setState({formStatus:"danger",formMessage:"New Password and Confirm Password didn't match"}):this.setState({formStatus:"danger",formMessage:"Please enter valid value old password"})}}render(){const e=this.state,t=e.oldPassword,a=e.newPassword,n=e.confirmPassword,s=e.formMessage,o=e.formStatus;return r.a.createElement(O.a,{className:"App"},r.a.createElement(A.a,null,r.a.createElement(I.a,null,r.a.createElement("h2",null,"Change Password"),r.a.createElement(ue.a,{onSubmit:this.handleChangePassword},r.a.createElement(ge,{message:s,status:o}),r.a.createElement(ie.a,null,r.a.createElement(he.a,null,"Old Password"),r.a.createElement(de.a,{type:"password",name:"oldPassword",placeholder:"******",value:t,onChange:this.handleInputChange})),r.a.createElement(ie.a,null,r.a.createElement(he.a,null,"New Password"),r.a.createElement(de.a,{type:"password",name:"newPassword",placeholder:"******",value:a,onChange:this.handleInputChange})),r.a.createElement(ie.a,null,r.a.createElement(he.a,null,"Confirm Password"),r.a.createElement(de.a,{type:"password",name:"confirmPassword",placeholder:"******",value:n,onChange:this.handleInputChange})),r.a.createElement(j.a,{color:"primary"},"Change")," ",r.a.createElement(j.a,{color:"secondary",onClick:this.toggle},"Cancel")))))}}var Se=Object(i.g)(xe),Pe=a(133),Ne=a(134),Oe=a(135),Ae=a(144),Ie=a(145),je=a(146),Le=a(136),Re=a(137),Ue=a(138),Fe=a(139),Me=a(140);class De extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.toggle=()=>{this.setState({isOpen:!this.state.isOpen})}}render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.a,{onClick:this.toggle}),r.a.createElement(Ne.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(Oe.a,{className:"ml-auto",navbar:!0},r.a.createElement(Ae.a,{nav:!0,inNavbar:!0},r.a.createElement(Ie.a,{nav:!0,caret:!0},"Settings"),r.a.createElement(je.a,{right:!0},r.a.createElement(Le.a,{tag:"div"},r.a.createElement(Re.a,{to:"/about",tag:u.b},r.a.createElement("strong",null,"About"))),r.a.createElement(Le.a,{tag:"div"},r.a.createElement(Re.a,{to:"/profile/change_password",tag:u.b},r.a.createElement("strong",null,"Change Password"))),r.a.createElement(Le.a,{divider:!0}),r.a.createElement(Le.a,{onClick:this.props.onLogOut},"Logout"))))))}}var Ge=({onLogOut:e,isAdmin:t,version:a})=>r.a.createElement(Ue.a,{color:"light",light:!0,expand:"md"},r.a.createElement(Fe.a,{exact:!0,to:"/about",tag:u.b},"Cesi ",r.a.createElement(T.a,{color:"success"},a)),r.a.createElement(Oe.a,{pills:!0},r.a.createElement(Me.a,null,r.a.createElement(Re.a,{exact:!0,replace:!0,to:"/dashboard",tag:u.b},"Dashboard")),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{exact:!0,replace:!0,to:"/nodes",tag:u.b},"Nodes")),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{exact:!0,replace:!0,to:"/environments",tag:u.b},"Environments")),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{exact:!0,replace:!0,to:"/groups",tag:u.b},"Groups")),t&&r.a.createElement(Me.a,null,r.a.createElement(Re.a,{exact:!0,replace:!0,to:"/users",tag:u.b},"Users"))),r.a.createElement(De,{onLogOut:e}));class Te extends n.Component{constructor(...e){var t;super(...e),t=this,this.state={profile:null,version:"0",logs:[],nodes:[],environments:[],users:[],groups:[]},this.handleRefreshActivityLogs=Object(m.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.activitylogs.get();case 2:a=e.sent,t.setState({logs:a});case 4:case"end":return e.stop()}}),e)}))),this.handleClearActivityLogs=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.activitylogs.clear();case 2:t.setState({logs:[]});case 3:case"end":return e.stop()}}),e)}))),this.handleRefreshGroups=Object(m.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.groups.get();case 2:a=e.sent,t.setState({groups:a});case 4:case"end":return e.stop()}}),e)}))),this.handleRefreshNodes=Object(m.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.nodes.get();case 2:a=e.sent,t.setState({nodes:a});case 4:case"end":return e.stop()}}),e)}))),this.handleRefreshEnvironments=Object(m.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.environments.get();case 2:a=e.sent,t.setState({environments:a});case 4:case"end":return e.stop()}}),e)}))),this.handleRefreshDashboardSummary=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleRefreshEnvironments();case 2:return e.next=4,t.handleRefreshNodes();case 4:case"end":return e.stop()}}),e)}))),this.handleRefreshUsers=Object(m.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.users.get();case 2:a=e.sent,t.setState({users:a});case 4:case"end":return e.stop()}}),e)}))),this.handleRemoveUser=e=>{N.users.remove(e).then(()=>this.handleRefreshUsers()).catch(e=>console.log(e))},this.handleRefreshProfile=Object(m.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.profile.get();case 2:a=e.sent,t.setState({profile:a});case 4:case"end":return e.stop()}}),e)}))),this.handleLogIn=(e,a)=>new Promise(function(){var n=Object(m.a)(l.a.mark((function n(r,s){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.auth.logIn(e,a);case 3:r("okey"),t.handleRefreshProfile(),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0),s(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()),this.handleLogOut=()=>{N.auth.logOut().then(()=>{this.handleRefreshProfile()}).catch(e=>console.log(e))},this.getApiVersion=Object(m.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.version.get();case 2:a=e.sent,t.setState({version:a});case 4:case"end":return e.stop()}}),e)})))}componentDidMount(){this.handleRefreshProfile(),this.getApiVersion()}render(){return r.a.createElement(r.a.Fragment,null,this.state.profile?r.a.createElement(u.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{isAdmin:0===this.state.profile.type,onLogOut:this.handleLogOut,version:this.state.version}),r.a.createElement(i.d,null,r.a.createElement(i.a,{exact:!0,from:"/",to:"/dashboard"}),r.a.createElement(i.b,{path:"/dashboard",exact:!0,render:e=>r.a.createElement(V,Object.assign({},e,{logs:this.state.logs,environments:this.state.environments,nodes:this.state.nodes,clearActivityLogs:this.handleClearActivityLogs,refreshActivityLogs:this.handleRefreshActivityLogs,refreshDashboardSummary:this.handleRefreshDashboardSummary}))}),r.a.createElement(i.b,{path:"/nodes",exact:!0,render:e=>r.a.createElement(oe,Object.assign({},e,{nodes:this.state.nodes,refreshNodes:this.handleRefreshNodes}))}),r.a.createElement(i.b,{path:"/environments",exact:!0,render:e=>r.a.createElement(ne,Object.assign({},e,{environments:this.state.environments,refreshEnvironments:this.handleRefreshEnvironments}))}),r.a.createElement(i.b,{path:"/groups",exact:!0,render:e=>r.a.createElement(me,Object.assign({},e,{groups:this.state.groups,refreshGroups:this.handleRefreshGroups,nodes:this.state.nodes,refreshNodes:this.handleRefreshNodes}))}),r.a.createElement(i.b,{path:"/users",exact:!0,render:e=>r.a.createElement(we,Object.assign({},e,{users:this.state.users,refreshUsers:this.handleRefreshUsers,removeUser:this.handleRemoveUser}))}),r.a.createElement(i.b,{path:"/about",exact:!0,component:Ce}),r.a.createElement(i.b,{path:"/profile/change_password",exact:!0,component:Se}),r.a.createElement(i.b,{component:be})))):r.a.createElement(ke,{onLogIn:this.handleLogIn}))}}var We=Te;const ze=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Je(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}a(115);o.a.render(r.a.createElement(We,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/cesi",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/cesi","/service-worker.js");ze?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Je(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Je(e)})}}()},66:function(e,t,a){e.exports=a(116)},71:function(e,t,a){},73:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.3c897545.chunk.js.map